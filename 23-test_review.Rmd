# Test 3 Review Material {-}

Below are resources to help you practice and prepare for the test 3 in this course.

Test 3 will cover the material covered in Chapter 5 of this textbook:

- understanding what sign charts tell us about the function
- ability to identify local and global extrema, points of inflection and curvature
- ability to use a sign chart to find extrema
- ablity to plot a function based on information from the first and second derivative sign charts


## Test Instructions {-}
Below are the general instructions for all tests

- You will get a chance to **retake** this. Your **highest** score counts toward your final grade.  
- Follow the guidance for each part and **show all work** for full credit.  
- **Non-graphical calculators** are allowed.  
- **One page (two sides)** of handwritten (or font size 8) notes are allowed.
- The equation sheet from the textbook is included as part of the test pack (it doesn't count as note pages)


## Practice Short Answer{-}

1.  
If \(f'(x) > 0\) on an interval, what does this tell you about how the environmental variable is behaving? Give an example of a real system that might show this pattern.

<details><summary><strong>Suggested Answer</strong></summary>
The variable is increasing on that interval. Examples include lake temperature rising through the morning, snowpack depth increasing during a storm, or early-stage population growth.
</details>

---

2.  
A population model has a point where \(P'(t) = 0\) but \(P''(t) < 0\). Explain what is happening biologically at that moment.

<details><summary><strong>Suggested Answer</strong></summary>
The population has reached a peak. Growth has slowed to zero, and the negative second derivative shows decline is beginning due to limits like resources or space.
</details>

---

3.  
Why is an inflection point important in environmental systems? Describe a situation where identifying the moment when concavity changes could be useful.

<details><summary><strong>Suggested Answer</strong></summary>
An inflection point marks when the rate of change switches from accelerating to decelerating. Useful examples include algae transitioning from rapid bloom to nutrient-limited slowdown or a streamflow peak transitioning to recession.
</details>

---

4.  
If a function has a horizontal asymptote as \(x \to +\infty\), what does that usually represent in ecological or physical models?

<details><summary><strong>Suggested Answer</strong></summary>
A long-term limiting value. Examples: carrying capacity, maximum nutrient uptake, equilibrium storage or temperature.
</details>

---

5.  
A function has a vertical asymptote at \(x = 3\). What does this mean, and what environmental boundary might behave this way?

<details><summary><strong>Suggested Answer</strong></summary>
The function becomes undefined at \(x=3\) and approaches ±∞. Environmental analogies include thresholds like pore pressure reaching critical limits or denominators representing zero volume remaining.
</details>

---

6.  
You are given only a derivative graph \(f'(x)\). How can you determine where the original function is increasing or decreasing, has maxima/minima, or is concave up/down?

<details><summary><strong>Suggested Answer</strong></summary>
Increasing where \(f'>0\), decreasing where \(f'<0\). A max occurs where \(f'\) changes +→– and a min where –→+. Concavity depends on whether \(f'\) is rising (concave up) or falling (concave down).
</details>

---

7.  
The second derivative of a function is positive for all \(x\). What does this tell you about the shape of the curve?

<details><summary><strong>Suggested Answer</strong></summary>
The function is concave up everywhere. This could represent accelerating recovery or compounding growth after disturbance.
</details>

---

8.  
A logistic-style function changes concavity at exactly one value of \(x\). What does that point represent in system dynamics?

<details><summary><strong>Suggested Answer</strong></summary>
It is the inflection point—the moment of maximum growth rate, where growth switches from accelerating to slowing.
</details>

---

9.  
If \(f'(x)\) is always positive but decreases toward zero as \(x \to \infty\), how would the graph look? What real process behaves this way?

<details><summary><strong>Suggested Answer</strong></summary>
The function increases but levels off toward a horizontal asymptote. Examples include nutrient uptake saturation, long-term warming trends, or logistic population limits.
</details>

---

10.  
An environmental dataset increases, then decreases, then increases again. What must the sign of the derivative look like?

<details><summary><strong>Suggested Answer</strong></summary>
The derivative must be +, then –, then +. Causes could include seasonal cycles, predator–prey oscillations, or storm hydrograph rise–fall–rise sequences.
</details>

---

11.  
If two functions both satisfy \(f'(a)=0\), must they have the same type of extremum at \(x=a\)? Explain.

<details><summary><strong>Suggested Answer</strong></summary>
No. A horizontal tangent could be a max, min, saddle, or flat point. The behavior depends on sign changes in \(f'\) or on \(f''(a)\).
</details>

---

12.  
A function’s rate of change increases rapidly, then levels off. What does this say about \(f'\) and \(f''\)?

<details><summary><strong>Suggested Answer</strong></summary>
\(f'>0\) throughout. \(f''>0\) during the acceleration phase, then \(f''<0\) as growth slows. This is typical of logistic or saturation processes.
</details>

---

13.  
In an environmental time series, what does it mean if \(f''(t) < 0\) while \(f'(t) > 0\)?

<details><summary><strong>Suggested Answer</strong></summary>
The variable is increasing but at a slowing rate. Examples: warming lake approaching equilibrium, population nearing carrying capacity.
</details>

---

14.  
Suppose a function has an inflection point at \(x=5\). What does this tell you about system behavior on each side?

<details><summary><strong>Suggested Answer</strong></summary>
Concavity switches sign at 5. The system moves from accelerating to slowing change (or vice versa), marking a transition in dynamics.
</details>

---

15.  
Why is a vertical asymptote different from a point where the derivative is undefined?

<details><summary><strong>Suggested Answer</strong></summary>
A vertical asymptote means the function itself blows up to ±∞. A derivative can be undefined even when the function is finite (corners, cusps). These reflect different structural vs. behavioral limitations.
</details>

---

16.  
A streamflow model reaches a maximum at \(t=7\) hours. What does this say about the hydrologic process?

<details><summary><strong>Suggested Answer</strong></summary>
Before 7 hr, discharge increases; after, it decreases. This marks peak flow, when routing and inputs balance before recession dominates.
</details>

---

17.  
A derivative graph shows a long flat region where \(f'(x) \approx 0\). What might this indicate?

<details><summary><strong>Suggested Answer</strong></summary>
The system is experiencing very little change. Examples: midday temperature plateau, stable soil moisture, population near carrying capacity.
</details>

---

18.  
Why is the quadratic formula useful when analyzing derivatives?

<details><summary><strong>Suggested Answer</strong></summary>
Many derivatives simplify to quadratics. Finding extrema or inflection points requires solving \(f'=0\) or \(f''=0\), and the quadratic formula works even when factoring doesn’t.
</details>

---

19.  
If a function always has a small but positive derivative, how would you describe the shape?

<details><summary><strong>Suggested Answer</strong></summary>
It increases gradually with no peaks or sharp transitions. Examples include slow climate warming, gradual biomass growth, or long-term CO₂ trends.
</details>

---

20.  
A model has a horizontal asymptote at \(y=120\). What does this say about long-term system behavior?

<details><summary><strong>Suggested Answer</strong></summary>
The system approaches a stable upper limit, such as a carrying capacity, saturation level, or maximum equilibrium value.
</details>

---

21.  
A function has  
\[
\lim_{x\to\infty} f(x)=8.
\]  
What does this horizontal asymptote tell you about the long-term behavior of the system being modeled?

<details><summary><strong>Suggested Answer</strong></summary>
The system approaches and stabilizes around 8 as the input variable becomes very large. This represents a long-term equilibrium such as a carrying capacity, saturation point, or thermal equilibrium.
</details>

---

22.  
Given  
\[
f(x)=\frac{5x}{x-4},
\]  
identify the vertical asymptote and describe the behavior of the function as \(x\) approaches that asymptote from the left and from the right.

<details><summary><strong>Suggested Answer</strong></summary>
The vertical asymptote is at \(x=4\).  
As \(x\to 4^-\), the denominator is negative and very small, so \(f(x)\to -\infty\).  
As \(x\to 4^+\), the denominator is positive and very small, so \(f(x)\to +\infty\).
</details>

---

23.  
Explain the difference between approaching a horizontal asymptote from above vs. approaching it from below.  
What does each imply about the sign of the derivative for large \(x\)?

<details><summary><strong>Suggested Answer</strong></summary>
Approaching from above means the function is decreasing toward the asymptote, so \(f'(x) < 0\) for large \(x\).  
Approaching from below means the function is increasing toward the asymptote, so \(f'(x) > 0\) for large \(x\).
</details>

---

24.  
A function has two vertical asymptotes at \(x=-1\) and \(x=3\).  
What does this imply about the domain and structure of the graph?

<details><summary><strong>Suggested Answer</strong></summary>
The domain excludes \(x=-1\) and \(x=3\).  
The graph is broken into three disconnected pieces, each with potentially different behavior (increasing/decreasing, concavity, extrema), since the function cannot cross those asymptotes.
</details>

---

25.  
A rational function approaches the horizontal asymptote \(y=0\) as \(x\to\pm\infty\).  
Give a real-world environmental process that might behave this way.

<details><summary><strong>Suggested Answer</strong></summary>
Examples include pollutant concentration decaying toward zero, cooling curves approaching ambient temperature, radioactive decay processes, or stream velocity decreasing to near zero as flood waters recede.
</details>

---



## Practice Problems{-}



### **Problem 1 — Clean Cubic Example** {-}

Consider the function  
\[
f(x) = x^3 - 3x.
\]

Use derivatives and sign charts to analyze its behavior.


<details>
<summary><strong>Check 1st derivative</strong></summary>

\[
f'(x) = 3(x-1)(x+1).
\]

</details>


<details>
<summary><strong>Check critical points</strong></summary>

\[
f'(x)=0 \quad\Rightarrow\quad x=-1,\;1.
\]

</details>


<details>
<summary><strong>Check 2nd derivative</strong></summary>

\[
f''(x)=6x.
\]

</details>


<details>
<summary><strong>Check inflection point</strong></summary>

\[
f''(x)=0 \quad\Rightarrow\quad x=0.
\]

</details>


<details>
<summary><strong>Full solution</strong></summary>

Start with  
\[
f(x)=x^3 - 3x.
\]

**1. First derivative (with factoring)**  
\[
f'(x)=3x^2 - 3.
\]

Factor the derivative:
\[
3x^2 - 3 = 3(x^2 - 1) = 3(x-1)(x+1).
\]

**Critical points** solve  
\[
3(x-1)(x+1)=0 \quad\Rightarrow\quad x=-1,\;1.
\]

Sign of the derivative:
- For \(x<-1\): both factors negative → \(f'(x)>0\)  
- For \(-1<x<1\): one positive, one negative → \(f'(x)<0\)  
- For \(x>1\): both positive → \(f'(x)>0\)

So the function is:
- **Increasing** on \((-\infty,-1)\)  
- **Decreasing** on \((-1,1)\)  
- **Increasing** on \((1,\infty)\)

Thus:
- **Local maximum** at \(x=-1\)  
- **Local minimum** at \(x=1\)


**2. Second derivative (with factoring)**  
\[
f''(x)=6x.
\]

Solve \(f''(x)=0\):
\[
6x=0 \quad\Rightarrow\quad x=0.
\]

Sign of second derivative:
- \(f''(x)<0\) for \(x<0\) → concave down  
- \(f''(x)>0\) for \(x>0\) → concave up  

Thus \(x=0\) is an **inflection point**.



Putting together the behavior:

- Increasing → decreasing → increasing  
- Concave down for \(x<0\)  
- Concave up for \(x>0\)  
- Local max at \(x=-1\)  
- Local min at \(x=1\)  
- Inflection at \(x=0\)


```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
library(dplyr)

# ------------------------
# Adjustable axis limits
# ------------------------
xlim <- c(-3, 3)     # or NULL
ylim <- NULL         # or NULL
# ------------------------

# Function
f <- function(x) x^3 - 3*x

# Critical points
crit1 <- -1
crit2 <- 1

# Inflection point
infl <- 0

# Build data for curve
x_vals <- seq(-3, 3, length.out = 2000)
df <- data.frame(
  x = x_vals,
  y = f(x_vals)
)

# Concavity shading: down → up
shade <- data.frame(
  xmin = c(min(x_vals), infl),
  xmax = c(infl, max(x_vals)),
  concavity = c("down", "up")
)

shade$fill <- ifelse(shade$concavity == "up", "lightblue", "moccasin")

p <- ggplot(df, aes(x, y)) +
  
  # shaded concavity regions
  geom_rect(
    data = shade,
    inherit.aes = FALSE,
    aes(xmin = xmin, xmax = xmax,
        ymin = -Inf, ymax = Inf,
        fill = fill),
    alpha = 0.25
  ) +
  scale_fill_identity() +
  
  # function curve
  geom_line(color = "steelblue", linewidth = 1.2) +
  
  # critical points
  geom_point(aes(x = crit1, y = f(crit1)), color = "firebrick", size = 3) +
  geom_point(aes(x = crit2, y = f(crit2)), color = "firebrick", size = 3) +
  
  annotate("text", x = crit1, y = f(crit1), label = "local max", vjust = -1) +
  annotate("text", x = crit2, y = f(crit2), label = "local min", vjust = -1) +
  
  # inflection
  geom_point(aes(x = infl, y = f(infl)), color = "darkgreen", size = 3) +
  annotate("text", x = infl, y = f(infl), label = "inflection", vjust = 1.5) +
  
  labs(
    title = "f(x) = x^3 - 3x",
    subtitle = "Shaded regions show concavity (blue = up, gold = down)",
    x = "x",
    y = "f(x)"
  ) +
  theme_minimal(base_size = 14)

# Apply axis limits if provided
if (!is.null(xlim) | !is.null(ylim)) {
  p <- p + coord_cartesian(xlim = xlim, ylim = ylim)
}

p

```




</details>


### **Problem 2 — Symmetric Quartic** {-}

Consider the function  
\[
f(x) = x^4 - 4x^2.
\]

Use derivatives and sign charts to analyze its behavior.


<details>
<summary><strong>Check 1st derivative</strong></summary>

\[
f'(x) = 4x(x^2 - 2).
\]

</details>


<details>
<summary><strong>Check critical points</strong></summary>

\[
x = 0,\quad x = \pm\sqrt{2}.
\]

</details>


<details>
<summary><strong>Check 2nd derivative</strong></summary>

\[
f''(x) = 4(3x^2 - 2).
\]

</details>


<details>
<summary><strong>Check inflection point</strong></summary>

\[
x = \pm\sqrt{\tfrac{2}{3}}.
\]

</details>


<details>
<summary><strong>Full solution</strong></summary>

Start with  
\[
f(x)=x^4 - 4x^2.
\]

**1. First derivative (with factoring)**  
\[
f'(x)=4x^3 - 8x = 4x(x^2 - 2).
\]

Critical points solve  
\[
4x(x^2 - 2) = 0 \quad\Rightarrow\quad x = 0,\; \pm\sqrt{2}.
\]

Sign of derivative:
- For \(x < -\sqrt{2}\): \(f'(x) < 0\)  
- For \(-\sqrt{2} < x < 0\): \(f'(x) > 0\)  
- For \(0 < x < \sqrt{2}\): \(f'(x) < 0\)  
- For \(x > \sqrt{2}\): \(f'(x) > 0\)

Thus:
- **Local max** at \(x = 0\)  
- **Local mins** at \(x = \pm\sqrt{2}\)

---

**2. Second derivative (with factoring)**  
\[
f''(x)=12x^2 - 8 = 4(3x^2 - 2).
\]

Solve  
\[
3x^2 - 2 = 0 \quad\Rightarrow\quad x = \pm\sqrt{\tfrac{2}{3}}.
\]

Concavity:
- **Down** for \(|x| < \sqrt{2/3}\)  
- **Up** for \(|x| > \sqrt{2/3}\)



```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
library(dplyr)

# ------------------------
# Adjustable axis limits
# ------------------------
xlim <- c(-3, 3)     # or NULL
ylim <- c(-5,5)         # or NULL
# ------------------------

# Function
f <- function(x) x^4 - 4*x^2

# Critical points
crit0 <- 0
critL <- -sqrt(2)
critR <-  sqrt(2)

# Inflection points
inflL <- -sqrt(2/3)
inflR <-  sqrt(2/3)

# Build data for curve
x_vals <- seq(-3, 3, length.out = 2000)
df <- data.frame(
  x = x_vals,
  y = f(x_vals)
)

# Concavity shading: up → down → up
shade <- data.frame(
  xmin = c(min(x_vals), inflL, inflR),
  xmax = c(inflL, inflR, max(x_vals)),
  concavity = c("up","down","up")
)

shade$fill <- ifelse(shade$concavity == "up", "lightblue", "moccasin")

p <- ggplot(df, aes(x, y)) +
  
  geom_rect(
    data = shade,
    inherit.aes = FALSE,
    aes(xmin = xmin, xmax = xmax,
        ymin = -Inf, ymax = Inf,
        fill = fill),
    alpha = 0.25
  ) +
  scale_fill_identity() +
  
  geom_line(color = "steelblue", linewidth = 1.2) +
  
  geom_point(aes(x = crit0, y = f(crit0)), color = "firebrick", size = 3) +
  geom_point(aes(x = critL, y = f(critL)), color = "firebrick", size = 3) +
  geom_point(aes(x = critR, y = f(critR)), color = "firebrick", size = 3) +
  annotate("text", x = crit0, y = f(crit0), label = "local max", vjust = -1) +
  annotate("text", x = critL, y = f(critL), label = "local min", vjust = -1) +
  annotate("text", x = critR, y = f(critR), label = "local min", vjust = -1) +
  
  geom_point(aes(x = inflL, y = f(inflL)), color = "darkgreen", size = 3) +
  geom_point(aes(x = inflR, y = f(inflR)), color = "darkgreen", size = 3) +
  annotate("text", x = inflL, y = f(inflL), label = "inflection", vjust = 1.5) +
  annotate("text", x = inflR, y = f(inflR), label = "inflection", vjust = 1.5) +
  
  labs(
    title = "f(x) = x^4 - 4x^2",
    subtitle = "Shaded regions show concavity (blue = up, gold = down)",
    x = "x",
    y = "f(x)"
  ) +
  theme_minimal(base_size = 14)

# Apply axis limits if provided
if (!is.null(xlim) | !is.null(ylim)) {
  p <- p + coord_cartesian(xlim = xlim, ylim = ylim)
}


p

```

</details>



### **Problem 3 — Rational Function With Simple Roots** {-}

Consider the function  
\[
f(x) = \frac{x}{x^2 + 1}.
\]

Use derivatives and sign charts to analyze its behavior.


<details>
<summary><strong>Check 1st derivative</strong></summary>

\[
f'(x) = \frac{1 - x^2}{(x^2+1)^2}.
\]

</details>


<details>
<summary><strong>Check critical points</strong></summary>

\[
x = \pm 1.
\]

</details>


<details>
<summary><strong>Check 2nd derivative</strong></summary>

\[
f''(x) = \frac{-2x(x^2+3)}{(x^2+1)^3}.
\]

</details>


<details>
<summary><strong>Check inflection point</strong></summary>

\[
x = 0.
\]

</details>


<details>
<summary><strong>Full solution</strong></summary>

Start with  
\[
f(x)=\frac{x}{x^2+1}.
\]

---

**1. First derivative (with factoring)**  

Apply the quotient rule:

\[
f'(x)=\frac{(1)(x^2+1) - x(2x)}{(x^2+1)^2}
     = \frac{x^2+1 - 2x^2}{(x^2+1)^2}
     = \frac{1 - x^2}{(x^2+1)^2}.
\]

**Critical points** solve  
\[
1 - x^2 = 0 \quad\Rightarrow\quad x = \pm 1.
\]

Derivative sign:

- \(x < -1\): \(1 - x^2 < 0\) → decreasing  
- \(-1 < x < 1\): \(1 - x^2 > 0\) → increasing  
- \(x > 1\): \(1 - x^2 < 0\) → decreasing  

Thus:
- **Local min** at \(x=-1\)  
- **Local max** at \(x=1\)

---

**2. Second derivative (with factoring)**  

\[
f''(x) = \frac{-2x(x^2+3)}{(x^2+1)^3}.
\]

Set numerator to zero:

\[
-2x(x^2+3)=0.
\]

Since \(x^2+3 > 0\),  
\[
x = 0
\]
is the only inflection point.

Concavity:

- \(x < 0\): \(f''(x) > 0\) → concave up  
- \(x > 0\): \(f''(x) < 0\) → concave down  

---

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
library(dplyr)

# ------------------------
# Adjustable axis limits
# ------------------------
xlim <- c(-3, 3)     # or NULL
ylim <- c(-1,1)       # or NULL
# ------------------------

f <- function(x) x/(x^2+1)

# Critical points
critL <- -1
critR <-  1

# Inflection point
infl <- 0

# Build data
x_vals <- seq(-3, 3, length.out = 2000)
df <- data.frame(x = x_vals, y = f(x_vals))

# Concavity shading: up → down
shade <- data.frame(
  xmin = c(min(x_vals), infl),
  xmax = c(infl, max(x_vals)),
  concavity = c("up","down")
)
shade$fill <- ifelse(shade$concavity=="up","lightblue","moccasin")

p <- ggplot(df, aes(x, y)) +
  
  geom_rect(
    data = shade,
    inherit.aes = FALSE,
    aes(xmin = xmin, xmax = xmax,
        ymin = -Inf, ymax = Inf,
        fill = fill),
    alpha = 0.25
  ) +
  scale_fill_identity() +
  
  geom_line(color = "steelblue", linewidth = 1.2) +
  
  geom_point(aes(x = critL, y = f(critL)), color = "firebrick", size = 3) +
  geom_point(aes(x = critR, y = f(critR)), color = "firebrick", size = 3) +
  annotate("text", x = critL, y = f(critL), label = "local min", vjust = -1) +
  annotate("text", x = critR, y = f(critR), label = "local max", vjust = -1) +
  
  geom_point(aes(x = infl, y = f(infl)), color = "darkgreen", size = 3) +
  annotate("text", x = infl, y = f(infl), label = "inflection", vjust = 1.5) +
  
  labs(
    title = "Challenge:  f(x)=x/(x^2+1)",
    subtitle = "Shaded regions show concavity (blue = up, gold = down)",
    x = "x",
    y = "f(x)"
  ) +
  theme_minimal(base_size = 14)

if (!is.null(xlim) | !is.null(ylim)) {
  p <- p + coord_cartesian(xlim = xlim, ylim = ylim)
}

p
```
</details>

### **Problem 4 — Exponential Product With Clean Factors** {-}

Consider the function  
\[
f(x) = x^2 e^{-x}.
\]

Use derivatives and sign charts to analyze its behavior.


<details>
<summary><strong>Check 1st derivative</strong></summary>

\[
f'(x) = e^{-x}x(2 - x).
\]

</details>


<details>
<summary><strong>Check critical points</strong></summary>

\[
x = 0,\quad x = 2.
\]

</details>


<details>
<summary><strong>Check 2nd derivative</strong></summary>

\[
f''(x) = e^{-x}(x^2 - 4x + 2).
\]

</details>


<details>
<summary><strong>Check inflection points</strong></summary>

\[
x = 2 \pm \sqrt{2}.
\]

</details>


<details>
<summary><strong>Full solution</strong></summary>

Start with  
\[
f(x)=x^2 e^{-x}.
\]

---

**1. First derivative (with factoring)**

Use the product rule:  
\[
f'(x) = (2x)e^{-x} + x^2(-e^{-x})
      = e^{-x}(2x - x^2)
      = e^{-x}x(2 - x).
\]

**Critical points** come from  
\[
e^{-x}x(2-x)=0.
\]

Since \(e^{-x} \neq 0\), solutions are  
\[
x=0,\quad x=2.
\]

Sign of \(f'(x)\):

- For \(x<0\): \(x<0\), \(2-x>0\) → negative → decreasing  
- For \(0<x<2\): positive × positive → positive → increasing  
- For \(x>2\): positive × negative → negative → decreasing  

Thus:
- **Local minimum** at \(x=0\)  
- **Local maximum** at \(x=2\)

---

**2. Second derivative (with factoring)**

Differentiate  
\[
f'(x)=e^{-x}(2x - x^2).
\]

Using product rule again:
\[
f''(x)=e^{-x}(-1)(2x - x^2) + e^{-x}(2 - 2x)
      = e^{-x}(x^2 - 4x + 2).
\]

Solve  
\[
x^2 - 4x + 2 = 0.
\]

Roots:
\[
x = 2 \pm \sqrt{2}.
\]

Concavity:

- **Up** on \((-\infty,\, 2-\sqrt{2})\)  
- **Down** on \((2-\sqrt{2},\, 2+\sqrt{2})\)  
- **Up** on \((2+\sqrt{2},\,\infty)\)

---

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
library(dplyr)

# ------------------------
# Adjustable axis limits
# ------------------------
xlim <- c(-1, 6)     # or NULL
ylim <- c(-0.1,1)      # or NULL
# ------------------------

# Function
f <- function(x) x^2 * exp(-x)

# Critical points
crit1 <- 0
crit2 <- 2

# Inflection points
inflL <- 2 - sqrt(2)
inflR <- 2 + sqrt(2)

# Build data
x_vals <- seq(-1, 6, length.out = 2000)
df <- data.frame(x = x_vals, y = f(x_vals))

# Concavity shading: up → down → up
shade <- data.frame(
  xmin = c(min(x_vals), inflL, inflR),
  xmax = c(inflL, inflR, max(x_vals)),
  concavity = c("up","down","up")
)
shade$fill <- ifelse(shade$concavity=="up","lightblue","moccasin")

p <- ggplot(df, aes(x,y)) +
  
  geom_rect(
    data = shade,
    inherit.aes = FALSE,
    aes(xmin=xmin, xmax=xmax,
        ymin=-Inf, ymax=Inf,
        fill=fill),
    alpha=0.25
  ) +
  scale_fill_identity() +
  
  geom_line(color="steelblue", linewidth=1.2) +
  
  geom_point(aes(x=crit1, y=f(crit1)), color="firebrick", size=3) +
  geom_point(aes(x=crit2, y=f(crit2)), color="firebrick", size=3) +
  annotate("text", x=crit1, y=f(crit1), label="local min", vjust=-1) +
  annotate("text", x=crit2, y=f(crit2), label="local max", vjust=-1) +
  
  geom_point(aes(x=inflL, y=f(inflL)), color="darkgreen", size=3) +
  geom_point(aes(x=inflR, y=f(inflR)), color="darkgreen", size=3) +
  annotate("text", x=inflL, y=f(inflL), label="inflection", vjust=1.5) +
  annotate("text", x=inflR, y=f(inflR), label="inflection", vjust=1.5) +
  
  labs(
    title="Challenge:  f(x) = x^2 e^{-x}",
    subtitle="Shaded regions show concavity (blue = up, gold = down)",
    x="x",
    y="f(x)"
  ) +
  theme_minimal(base_size=14)

if (!is.null(xlim) | !is.null(ylim)) {
  p <- p + coord_cartesian(xlim=xlim, ylim=ylim)
}

p
```
</details>

### **Problem 5 — Logarithm With Symmetry** {-}

Consider the function  
\[
f(x) = \ln(x^2 + 1).
\]

Use derivatives and sign charts to analyze its behavior.


<details>
<summary><strong>Check 1st derivative</strong></summary>

\[
f'(x)=\frac{2x}{x^2+1}.
\]

</details>


<details>
<summary><strong>Check critical points</strong></summary>

\[
f'(x)=0 \quad\Rightarrow\quad x=0.
\]

</details>


<details>
<summary><strong>Check 2nd derivative</strong></summary>

\[
f''(x)=\frac{2(1 - x^2)}{(x^2+1)^2}.
\]

</details>


<details>
<summary><strong>Check inflection points</strong></summary>

\[
x = \pm 1.
\]

</details>


<details>
<summary><strong>Full solution</strong></summary>

Start with  
\[
f(x)=\ln(x^2+1).
\]

---

**1. First derivative (with factoring)**

Use chain rule:  
\[
f'(x)=\frac{1}{x^2+1}\cdot 2x = \frac{2x}{x^2+1}.
\]

Critical point from  
\[
\frac{2x}{x^2+1}=0 \quad\Rightarrow\quad x=0.
\]

Sign of \(f'(x)\):
- For \(x<0\): numerator negative → decreasing  
- For \(x>0\): numerator positive → increasing  

Thus the function is:
- **Decreasing** on \((-\infty,0)\)  
- **Increasing** on \((0,\infty)\)

So \(x=0\) is a **local minimum**.

---

**2. Second derivative (with factoring)**

Differentiate  
\[
f'(x)=\frac{2x}{x^2+1}.
\]

Using quotient rule:
\[
f''(x)=\frac{2(x^2+1) - 2x(2x)}{(x^2+1)^2}
      =\frac{2 - 2x^2}{(x^2+1)^2}
      =\frac{2(1-x^2)}{(x^2+1)^2}.
\]

Solve  
\[
1 - x^2 = 0 \quad\Rightarrow\quad x=\pm 1.
\]

Concavity:
- For \(|x|<1\): \(1-x^2>0\) → concave up  
- For \(|x|>1\): \(1-x^2<0\) → concave down  

Thus \(x=\pm 1\) are **inflection points**.

---

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
library(dplyr)

# ------------------------
# Adjustable axis limits
# ------------------------
xlim <- c(-4, 4)     # or NULL
ylim <- c(-0.1,1)         # or NULL
# ------------------------

# Function
f <- function(x) log(x^2 + 1)

# Critical point
crit <- 0

# Inflection points
inflL <- -1
inflR <- 1

# Build data
x_vals <- seq(-4, 4, length.out = 2000)
df <- data.frame(x = x_vals, y = f(x_vals))

# Concavity shading: down → up → down
shade <- data.frame(
  xmin = c(min(x_vals), inflL, inflR),
  xmax = c(inflL, inflR, max(x_vals)),
  concavity = c("down","up","down")
)
shade$fill <- ifelse(shade$concavity=="up","lightblue","moccasin")

p <- ggplot(df, aes(x,y)) +
  
  geom_rect(
    data = shade,
    inherit.aes = FALSE,
    aes(xmin=xmin, xmax=xmax, ymin=-Inf, ymax=Inf, fill=fill),
    alpha=0.25
  ) +
  scale_fill_identity() +
  
  geom_line(color="steelblue", linewidth=1.2) +
  
  geom_point(aes(x=crit, y=f(crit)), color="firebrick", size=3) +
  annotate("text", x=crit, y=f(crit), label="local min", vjust=-1) +
  
  geom_point(aes(x=inflL, y=f(inflL)), color="darkgreen", size=3) +
  geom_point(aes(x=inflR, y=f(inflR)), color="darkgreen", size=3) +
  annotate("text", x=inflL, y=f(inflL), label="inflection", vjust=1.5) +
  annotate("text", x=inflR, y=f(inflR), label="inflection", vjust=1.5) +
  
  labs(
    title="Challenge:  f(x) = ln(x^2 + 1)",
    subtitle="Shaded regions show concavity (blue = up, gold = down)",
    x="x",
    y="f(x)"
  ) +
  theme_minimal(base_size=14)

if (!is.null(xlim) | !is.null(ylim)) {
  p <- p + coord_cartesian(xlim=xlim, ylim=ylim)
}

p
```
</details>

### **Problem 6 — Rational Function With a Vertical Asymptote** {-}

Consider the function  
\[
f(x) = \frac{x^2 - 1}{x - 2}.
\]

Use derivatives, sign charts, and asymptotes to analyze its behavior.


<details>
<summary><strong>Check 1st derivative</strong></summary>

\[
f'(x)=\frac{x^2 - 4x + 1}{(x-2)^2}.
\]

</details>


<details>
<summary><strong>Check critical points</strong></summary>

\[
x = 2 \pm \sqrt{3}.
\]

</details>


<details>
<summary><strong>Check 2nd derivative</strong></summary>

\[
f''(x)=\frac{6}{(x-2)^3}.
\]

</details>


<details>
<summary><strong>Check inflection points</strong></summary>

None — concavity switches *only* across the asymptote.

</details>


<details>
<summary><strong>Full solution</strong></summary>

We analyze  
\[
f(x)=\frac{x^2 - 1}{x - 2}.
\]

 **1. Domain and asymptote**

The denominator is zero at  
\[
x = 2,
\]  
so the domain is all real numbers except \(x=2\).  
Thus there is a **vertical asymptote at \(x=2\)**.

 **2. First derivative (with factoring)**

Quotient rule gives  
\[
f'(x)=\frac{x^2 - 4x + 1}{(x-2)^2}.
\]

Critical points come from the numerator:

\[
x^2 - 4x + 1=0
\quad\Rightarrow\quad
x = 2 \pm \sqrt{3}.
\]

The derivative is undefined at the vertical asymptote \(x=2\).

 **3. Second derivative (with factoring)**

\[
f''(x)=\frac{6}{(x-2)^3}.
\]

Sign analysis:

- For \(x<2\): denominator \(<0\) → \(f''(x)<0\) → **concave down**
- For \(x>2\): denominator \(>0\) → \(f''(x)>0\) → **concave up**

No inflection points occur *within* a domain interval — concavity only changes *across* the asymptote.

 **4. Behavior near the vertical asymptote**

To determine the direction of blow-up, compute limits from both sides.



 **Left-hand limit (approach from below)**

As \(x\to 2^-\):

- Numerator \(x^2 - 1 \to 3\) (positive)
- Denominator \(x - 2 \to 0^-\) (negative)

Thus  
\[
\lim_{x\to 2^-} f(x) = \frac{3}{0^-} = -\infty.
\]

 **Right-hand limit (approach from above)**

As \(x\to 2^+\):

- Numerator still \(x^2 - 1 \to 3\)
- Denominator \(x - 2 \to 0^+\) (positive)

Thus  
\[
\lim_{x\to 2^+} f(x) = \frac{3}{0^+} = +\infty.
\]

 **5. Summary of behavior**

- Vertical asymptote at **\(x=2\)**  
  - \(f(x)\to -\infty\) as \(x\to 2^-\)  
  - \(f(x)\to +\infty\) as \(x\to 2^+\)  

- Critical points at  
  \[
  x=2-\sqrt{3},\quad x=2+\sqrt{3}.
  \]

- Concavity:
  - Down on \((-\infty, 2)\)
  - Up on \((2, \infty)\)

---


```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
library(dplyr)

# ------------------------
# Adjustable axis limits
# ------------------------
xlim <- c(-2, 6)     # or NULL
ylim <- c(-10, 10)         # or NULL
# ------------------------

# Function
f <- function(x) (x^2 - 1)/(x - 2)

# Critical points
crit1 <- 2 - sqrt(3)
crit2 <- 2 + sqrt(3)

# Build domain pieces (split at asymptote)
x_vals_left  <- seq(xlim[1], 1.99, length.out=1500)
x_vals_right <- seq(2.01, xlim[2], length.out=1500)

df_left  <- data.frame(x = x_vals_left,  y = f(x_vals_left))
df_right <- data.frame(x = x_vals_right, y = f(x_vals_right))

# Concavity shading
shade <- data.frame(
  xmin = c(xlim[1], 2.01),
  xmax = c(1.99,    xlim[2]),
  concavity = c("down","up")
)
shade$fill <- ifelse(shade$concavity=="up","lightblue","moccasin")

p <- ggplot() +
  geom_rect(
    data=shade,
    inherit.aes=FALSE,
    aes(xmin=xmin, xmax=xmax, ymin=-Inf, ymax=Inf, fill=fill),
    alpha=0.25
  ) +
  scale_fill_identity() +
  
  geom_line(data=df_left,  aes(x,y), color="steelblue", linewidth=1.2) +
  geom_line(data=df_right, aes(x,y), color="steelblue", linewidth=1.2) +
  
  geom_vline(xintercept=2, linetype="dashed", color="firebrick") +
  annotate("text", x=2, y=0, label="VA", vjust=-1) +
  
  geom_point(aes(x=crit1, y=f(crit1)), color="purple", size=3) +
  geom_point(aes(x=crit2, y=f(crit2)), color="purple", size=3) +
  annotate("text", x=crit1, y=f(crit1), label="critical", vjust=-1) +
  annotate("text", x=crit2, y=f(crit2), label="critical", vjust=-1) +
  
  labs(
    title="Challenge:  f(x) = (x^2 - 1)/(x - 2)",
    subtitle="Vertical asymptote at x = 2; concave down (left), concave up (right)",
    x="x",
    y="f(x)"
  ) +
  theme_minimal(base_size=14)

if (!is.null(xlim) | !is.null(ylim)) {
  p <- p + coord_cartesian(xlim=xlim, ylim=ylim)
}

p
```
</details>



### **Problem 7 — Rational Function With Two Vertical Asymptotes** {-}

Consider the function  
\[
f(x) = \frac{1}{x(x-2)}.
\]

Use derivatives, sign charts, and asymptotes to analyze its behavior.


<details>
<summary><strong>Check 1st derivative</strong></summary>

\[
f'(x)= -\frac{2(x-1)}{x^2(x-2)^2}.
\]

</details>


<details>
<summary><strong>Check critical points</strong></summary>

\[
x = 1.
\]

</details>


<details>
<summary><strong>Check 2nd derivative</strong></summary>

\[
f''(x)=\frac{2(3x^2 - 6x + 4)}{x^3 (x-2)^3}.
\]

</details>


<details>
<summary><strong>Check inflection points</strong></summary>

Solve  
\[
3x^2 - 6x + 4 = 0
\]

No REAL roots

</details>


<details>
<summary><strong>Full solution</strong></summary>

We analyze  
\[
f(x)=\frac{1}{x(x-2)}.
\]

The denominator is zero at  
\[
x = 0,\qquad x = 2,
\]
so these produce vertical asymptotes and the domain is  
\[
(-\infty,0)\;\cup\;(0,2)\;\cup\;(2,\infty).
\]

To compute the first derivative, rewrite the function as  
\[
f(x)=[x(x-2)]^{-1}.
\]
Differentiating gives  
\[
f'(x)=-(x(x-2))^{-2}(2x-2)
      =-\frac{2(x-1)}{x^2(x-2)^2}.
\]
Critical points come from the numerator:
\[
-2(x-1)=0 \quad\Rightarrow\quad x=1.
\]
The derivative is undefined at the vertical asymptotes.

The second derivative is  
\[
f''(x)=\frac{2(3x^2 - 6x + 4)}{x^3 (x-2)^3}.
\]
Second-derivative critical points solve  
\[
3x^2 - 6x + 4=0.
\]
Using the quadratic formula,
\[
x=\frac{-b\pm\sqrt{b^2-4ac}}{2a}
  =\frac{6\pm\sqrt{36-48}}{6}
  =\frac{6\pm\sqrt{-12}}{6}.
\]
Because the discriminant is negative, the numerator never equals zero, so there are **no real inflection points** from the second derivative. Concavity changes only when crossing the asymptotes since the denominator changes sign there.

To understand the behavior near \(x=0\):

As \(x\to 0^-:\)  
denominator \(0^-\cdot(-2)=0^+\), so  
\[
\lim_{x\to 0^-} f(x)=+\infty.
\]

As \(x\to 0^+:\)  
denominator \(0^+\cdot(-2)=0^-\), so  
\[
\lim_{x\to 0^+} f(x)=-\infty.
\]

At \(x=2\):

As \(x\to 2^-:\)  
\((2^-)(0^-)=0^{+}\), so  
\[
\lim_{x\to 2^-} f(x)=+\infty.
\]

As \(x\to 2^+:\)  
\((2^+)(0^+)=0^{+}\), so  
\[
\lim_{x\to 2^+} f(x)=+\infty.
\]

For the horizontal asymptotes, note that  
\[
f(x)=\frac1{x(x-2)}\sim \frac1{x^2}
\]
as \(x\to\pm\infty\).
Thus  
\[
\lim_{x\to\pm\infty} f(x)=0,
\]
so the horizontal asymptote is  
\[
y=0.
\]

In summary:

- Vertical asymptotes at \(x=0\) and \(x=2\).  
- Horizontal asymptote \(y=0\).  
- One critical point from the first derivative at \(x=1.\)  
- No real inflection points because the quadratic in the numerator of \(f''\) has no real roots.  
- Concavity changes only across asymptotes, due to the denominator’s sign.


```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
library(dplyr)

# ------------------------
# Adjustable axis limits
# ------------------------
xlim <- c(-2, 4)
ylim <- c(-6, 6)
# ------------------------

# Function
f <- function(x) 1/(x*(x-2))

# First derivative critical point
crit <- 1

# "Inflection" points = sign changes in f'' across asymptotes
infl1 <- 0.5   # chosen to match visual midpoint between 0 and 1
infl2 <- 1.5   # chosen to match midpoint between 1 and 2

# Domain split at asymptotes 0 and 2
x_left   <- seq(xlim[1], -0.01, length.out = 1200)
x_mid    <- seq(0.01, 1.99,  length.out = 1200)
x_right  <- seq(2.01, xlim[2], length.out = 1200)

df_left  <- data.frame(x = x_left,  y = f(x_left))
df_mid   <- data.frame(x = x_mid,   y = f(x_mid))
df_right <- data.frame(x = x_right, y = f(x_right))

# Concavity shading:
# (-∞,0) concave down
# (0,2) concave up
# (2,∞) concave up
shade <- data.frame(
  xmin = c(xlim[1],   0.01,   2.01),
  xmax = c(-0.01,     1.99,   xlim[2]),
  concavity = c("down","up","up")
)
shade$fill <- ifelse(shade$concavity=="up","lightblue","moccasin")

p <- ggplot() +
  geom_rect(
    data=shade,
    inherit.aes=FALSE,
    aes(xmin=xmin, xmax=xmax, ymin=-Inf, ymax=Inf, fill=fill),
    alpha=0.25
  ) +
  scale_fill_identity() +
  
  geom_line(data=df_left,  aes(x,y), color="steelblue", linewidth=1.2) +
  geom_line(data=df_mid,   aes(x,y), color="steelblue", linewidth=1.2) +
  geom_line(data=df_right, aes(x,y), color="steelblue", linewidth=1.2) +
  
  # Vertical asymptotes
  geom_vline(xintercept=0, linetype="dashed", color="firebrick", linewidth=1) +
  geom_vline(xintercept=2, linetype="dashed", color="firebrick", linewidth=1) +
  annotate("text", x=0, y=0, label="VA", vjust=-1.2, color="firebrick") +
  annotate("text", x=2, y=0, label="VA", vjust=-1.2, color="firebrick") +
  
  # Critical point label
  geom_point(aes(x=crit, y=f(crit)), color="purple", size=3) +
  annotate("text", x=crit, y=f(crit), label="critical", vjust=-1.2, color="purple") +
  
 
  labs(
    title="Challenge:  f(x) = 1 / (x(x - 2))",
    subtitle="Two vertical asymptotes at x = 0 and x = 2",
    x="x", y="f(x)"
  ) +
  theme_minimal(base_size=14)

if (!is.null(xlim) | !is.null(ylim)) {
  p <- p + coord_cartesian(xlim=xlim, ylim=ylim)
}

p


```


</details>

### **Problem 8 — Logistic-Style Function With Two Horizontal Asymptotes** {-}

Consider the function  
\[
f(x)=\frac{80}{1+3e^{-0.5x}}.
\]

Use derivatives and asymptotes to analyze its behavior.

---

<details>
<summary><strong>Check 1st derivative</strong></summary>

\[
f'(x)=\frac{120e^{-0.5x}}{(1+3e^{-0.5x})^2}.
\]

</details>

<details>
<summary><strong>Check critical points</strong></summary>

The derivative is always positive.  
\[
\text{No critical points (always increasing).}
\]

</details>

<details>
<summary><strong>Check 2nd derivative</strong></summary>

\[
f''(x)=\frac{60e^{-0.5x}(3e^{-0.5x}-1)}{(1+3e^{-0.5x})^3}.
\]

</details>

<details>
<summary><strong>Check inflection point</strong></summary>

Solve  
\[
3e^{-0.5x}-1=0.
\]

\[
e^{-0.5x}=\tfrac13.
\]

\[
x = 2\ln(3).
\]

</details>

<details>
<summary><strong>Check horizontal asymptotes</strong></summary>

\[
\lim_{x\to-\infty} f(x)=0,
\qquad
\lim_{x\to+\infty} f(x)=80.
\]

Horizontal asymptotes:
\[
y=0, \qquad y=80.
\]

</details>

<details>
<summary><strong>Full solution</strong></summary>

We analyze  
\[
f(x)=\frac{80}{1+3e^{-0.5x}}.
\]

Rewrite the function as  
\[
f(x)=80(1+3e^{-0.5x})^{-1}.
\]

Differentiate:

\[
f'(x)=80(-1)(1+3e^{-0.5x})^{-2}\cdot(3e^{-0.5x}\cdot -0.5)
     =\frac{120e^{-0.5x}}{(1+3e^{-0.5x})^2}.
\]

Since all factors are positive,  
\[
f'(x) > 0
\]
for every real \(x\).  
Thus the function is always increasing and has no local maxima or minima.

Differentiate again:

\[
f''(x)=\frac{60e^{-0.5x}(3e^{-0.5x}-1)}{(1+3e^{-0.5x})^3}.
\]

Set the numerator equal to zero:

\[
3e^{-0.5x}-1=0
\]

\[
e^{-0.5x}=\tfrac13
\]

\[
x = 2\ln(3).
\]

For \(e^{-0.5x} > \frac13\), the graph is concave up;  
for \(e^{-0.5x} < \frac13\), the graph is concave down.

As \(x\to -\infty\):

- \(e^{-0.5x}\to\infty\), denominator → ∞  
- \[
  f(x)\to 0.
  \]

As \(x\to +\infty\):

- \(e^{-0.5x}\to 0\), denominator → 1  
- \[
  f(x)\to 80.
  \]

Thus the function is an increasing logistic curve with a lower horizontal asymptote at \(y=0\) and an upper horizontal asymptote at \(y=80\), switching concavity at the point \(x = 2\ln 3\).

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
library(dplyr)

# Adjustable axis limits
xlim <- c(-8, 10)
ylim <- c(-5, 85)

# Function
f <- function(x) 80 / (1 + 3*exp(-0.5*x))

# Inflection point
infl <- 2 * log(3)

# Build data
x_vals <- seq(xlim[1], xlim[2], length.out = 2000)
df <- data.frame(
  x = x_vals,
  y = f(x_vals)
)

# Concavity shading:
# f''(x) proportional to (3e^{-0.5x} - 1)
shade <- data.frame(
  xmin = c(xlim[1], infl),
  xmax = c(infl, xlim[2]),
  concavity = c("up", "down")
)
shade$fill <- ifelse(shade$concavity=="up", "lightblue", "moccasin")

p <- ggplot(df, aes(x, y)) +
  geom_rect(
    data = shade,
    inherit.aes = FALSE,
    aes(xmin=xmin, xmax=xmax,
        ymin=-Inf, ymax=Inf,
        fill=fill),
    alpha=0.25
  ) +
  scale_fill_identity() +
  
  geom_line(color="steelblue", linewidth=1.2) +
  
  geom_point(aes(x=infl, y=f(infl)), color="darkgreen", size=3) +
  annotate("text", x=infl, y=f(infl), label="inflection", vjust=-1.2) +
  
  geom_hline(yintercept=0, linetype="dashed", color="firebrick") +
  annotate("text", x=xlim[1]+1, y=0, label="HA: y=0", vjust=-1.2) +
  
  geom_hline(yintercept=80, linetype="dashed", color="firebrick") +
  annotate("text", x=xlim[1]+1, y=80, label="HA: y=80", vjust=-1.2) +
  
  labs(
    title="f(x) = 80 / (1 + 3 e^{-0.5x})",
    subtitle="Logistic curve with two horizontal asymptotes",
    x="x",
    y="f(x)"
  ) +
  theme_minimal(base_size=14)

p + coord_cartesian(xlim=xlim, ylim=ylim)
```




</details>

### **Challenge 1 — Rational Function ** {-}

Consider the function  
\[
f(x) = \frac{x^2 - 1}{x^2 + 1}.
\]

Analyze the first derivative, second derivative, critical points, and inflection points.

<details>
<summary><strong>Check 1st derivative</strong></summary>

\[
f'(x) = \frac{4x}{(x^2+1)^2}.
\]

</details>



<details>
<summary><strong>Check critical points</strong></summary>

Critical points solve \(f'(x)=0\):

\[
4x = 0 \quad\Rightarrow\quad x = 0.
\]

</details>



<details>
<summary><strong>Check 2nd derivative</strong></summary>

\[
f''(x) = 4\frac{1 - 3x^2}{(x^2+1)^3}.
\]

</details>



<details>
<summary><strong>Check inflection points</strong></summary>

Solve \(1 - 3x^2 = 0\):

\[
x = \pm \frac{1}{\sqrt{3}}.
\]

</details>



<details>
<summary><strong>Full solution</strong></summary>

We analyze  
\[
f(x)=\frac{x^2 - 1}{x - 2}.
\]

**1. Domain and asymptote**

\[
x - 2 = 0 \quad\Rightarrow\quad x = 2.
\]

Thus the domain is  
\[
(-\infty,2)\cup(2,\infty),
\]
with a **vertical asymptote at \(x=2\)**.

 **2. First derivative (with factoring)**

Using the quotient rule:

\[
f'(x)=\frac{(2x)(x-2) - (x^2 - 1)(1)}{(x-2)^2}.
\]

Expand the numerator:

\[
2x(x-2)=2x^2 - 4x,
\]

Subtract the second term:

\[
2x^2 - 4x - (x^2 - 1)
= x^2 - 4x + 1.
\]

So the derivative is  
\[
f'(x)=\frac{x^2 - 4x + 1}{(x-2)^2}.
\]

 **How the critical points were found**

Critical points occur when the derivative equals zero **and is defined**.

The denominator \((x-2)^2\) is never zero except at \(x=2\), where the function is undefined.  
So we only solve the numerator:

\[
x^2 - 4x + 1 = 0.
\]

Apply the quadratic formula:

\[
x=\frac{4 \pm \sqrt{(-4)^2 - 4(1)(1)}}{2}
  =\frac{4 \pm \sqrt{16 - 4}}{2}
  =\frac{4 \pm \sqrt{12}}{2}
  =\frac{4 \pm 2\sqrt{3}}{2}
  =2 \pm \sqrt{3}.
\]

Thus the critical points are:

\[
x=2-\sqrt{3},\qquad x=2+\sqrt{3}.
\]

Because the derivative does not exist at \(x=2\), that point is **not** a critical point.

 **3. Second derivative**

We start with  
\[
f'(x)=\frac{x^2 - 4x + 1}{(x-2)^2}.
\]

Using the quotient rule again:

\[
f''(x)=\frac{6}{(x-2)^3}.
\]

(Steps omitted here since they were checked previously.)

Sign of \(f''(x)\):

- For \(x<2\): denominator negative → **concave down**  
- For \(x>2\): denominator positive → **concave up**

Concavity switches across the vertical asymptote, not within the domain, so there are **no inflection points**.


**4. Limits at the vertical asymptote**

**Left-hand limit:**
\[
\lim_{x\to 2^-} f(x)
=\frac{x^2 - 1}{x - 2}
=\frac{3}{0^-}
=-\infty.
\]

**Right-hand limit:**
\[
\lim_{x\to 2^+} f(x)
=\frac{3}{0^+}
=+\infty.
\]

Thus:

- \(f(x)\to -\infty\) from the **left** of the asymptote  
- \(f(x)\to +\infty\) from the **right** of the asymptote  


**5. Summary**

- Vertical asymptote at \(x=2\)  
- Critical points at \(x = 2\pm\sqrt{3}\)  
- Concave down on \((-\infty,2)\), concave up on \((2,\infty)\)  
- Behavior flips dramatically across the asymptote


```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
library(dplyr)

# ------------------------
# Adjustable axis limits
# ------------------------
xlim <- c(-2, 4.5)   # or NULL
ylim <- c(-0.5, 5) # or NULL
# ------------------------

# Challenge 4 function
f <- function(x) exp(x) / (x^2 + 1)

# Inflection points
infl1 <- 2 - sqrt(3)    # ≈ 0.268
infl2 <- 1              # flat point + inflection
infl3 <- 2 + sqrt(3)    # ≈ 3.732

# Build data for the curve
x_vals <- seq(-2, 5, length.out = 2000)
df <- data.frame(
  x = x_vals,
  y = f(x_vals)
)

# Concavity shading: down → up → down → up
shade <- data.frame(
  xmin = c(-2,    infl1, infl2, infl3),
  xmax = c(infl1, infl2, infl3, 5),
  concavity = c("down", "up", "down", "up")
)

shade$fill <- ifelse(shade$concavity == "up", "lightblue", "moccasin")

p <- ggplot(df, aes(x, y)) +
  
  geom_rect(
    data = shade,
    inherit.aes = FALSE,
    aes(xmin = xmin, xmax = xmax,
        ymin = -Inf, ymax = Inf,
        fill = fill),
    alpha = 0.25
  ) +
  scale_fill_identity() +
  
  geom_line(color = "steelblue", linewidth = 1.2) +
  
  geom_point(aes(x = infl1, y = f(infl1)), color = "darkgreen", size = 3) +
  geom_point(aes(x = infl2, y = f(infl2)), color = "darkgreen", size = 3) +
  geom_point(aes(x = infl3, y = f(infl3)), color = "darkgreen", size = 3) +
  
  annotate("text", x = infl1, y = f(infl1), label = "inflection", vjust = 1.5) +
  annotate("text", x = infl2, y = f(infl2), label = "inflection", vjust = 1.5) +
  annotate("text", x = infl3, y = f(infl3), label = "inflection", vjust = 1.5) +
  
  geom_point(aes(x = 1, y = f(1)), color = "firebrick", size = 3) +
  annotate("text", x = 1, y = f(1), label = "flat point", vjust = -1) +
  
  labs(
    title = "f(x) = e^x / (x^2 + 1)",
    subtitle = "Concavity shading (blue = up, gold = down)",
    x = "x",
    y = "f(x)"
  ) +
  
  theme_minimal(base_size = 14)

# Apply adjustable limits if provided
if (!is.null(xlim) | !is.null(ylim)) {
  p <- p + coord_cartesian(xlim = xlim, ylim = ylim)
}

p
```
</details>




### Practice Test — Sign Charts & Applications {-}

This practice set mirrors the structure of your problems on the test:

1. **Section A** — Extrema from a factored first derivative  
2. **Section B** — Sign charts + sketching using \(f'\) and \(f''\)  
3. **Section C** — Asymptotes, extrema, concavity

Work through each table as if each row were its own problem.

---

#### **Section A — Extrema from a Factored First Derivative (Practice)**{-}

Use the provided factored derivative to:

- Identify critical points  
- Create a **first-derivative sign chart**  
- Classify each critical point (local max/min/neither)

| Function | Factored Derivative \(f'(x)\) |
|---------|-------------------------------|
| \(f_1(x)\) | \(f_1'(x)=e^{x}(x-1)(x+4)\) | 
| \(f_2(x)\) | \(f_2'(x)=-(x+2)(x-5)(x-1)\) | 
| \(f_3(x)\) | \(f_3'(x)=\dfrac{(x+3)(x-2)}{(x^2+1)}\) |

---

<details>
<summary><strong>Solution Key Section A (click to expand)</strong></summary>

<br>


For each function we:

- Identify critical points  
- Build a sign chart  
- Classify each point  

---

**✔ Function \(f_1(x)\)**  
\[
f_1'(x)=e^{x}(x-1)(x+4)
\]

**Critical points:**  
\[
x=-4,\qquad x=1
\]

**Sign chart:**

| Interval | Sign of \(f_1'(x)\) | Behavior |
|---------|----------------------|----------|
| \(x<-4\) | \((-)(-)=+\) → \(+\) | Increasing |
| \(-4<x<1\) | \((+)(-)= -\) | Decreasing |
| \(x>1\) | \((+)(+)=+\) | Increasing |

**Classification:**  
- At \(x=-4\): **increasing → decreasing** → **local max**  
- At \(x=1\): **decreasing → increasing** → **local min**

---

**✔ Function \(f_2(x)\)**  
\[
f_2'(x)=-(x+2)(x-5)(x-1)
\]

Critical points:  
\[
x=-2,\quad x=1,\quad x=5
\]

Sign chart (including the leading negative):

| Interval | Sign of product | After negative sign | Behavior |
|----------|-----------------|----------------------|----------|
| \(x<-2\) | \((-)(-)(-)= -\) | \(+\) | Increasing |
| \(-2<x<1\) | \((+)(-)(-)=+\) | \( -\) | Decreasing |
| \(1<x<5\) | \((+)(-)(+)= -\) | \(+\) | Increasing |
| \(x>5\) | \((+)(+)(+)=+\) | \(-\) | Decreasing |

Classification:

- \(x=-2\): **inc → dec** → **local max**  
- \(x=1\): **dec → inc** → **local min**  
- \(x=5\): **inc → dec** → **local max**

---

**✔ Function \(f_3(x)\)**  
\[
f_3'(x)=\frac{(x+3)(x-2)}{x^2+1}
\]

Denominator always positive → sign from numerator only.

Critical points:
\[
x=-3,\qquad x=2
\]

Sign chart:

| Interval | Sign of numerator | Behavior |
|----------|-------------------|----------|
| \(x<-3\) | \((-)(-)=+\) | Increasing |
| \(-3<x<2\) | \((+)(-)= -\) | Decreasing |
| \(x>2\) | \((+)(+)=+\) | Increasing |

Classification:

- \(x=-3\): **local max**  
- \(x=2\): **local min**

---

</details>

#### **Section B — Sign Charts & Sketching from \(f'\) and \(f''\)**{-}

For each function, use the given derivatives to:

- Find and classify critical points  
- Determine intervals of increasing/decreasing  
- Determine concavity  
- Sketch a **possible** graph of the function  

| Function | First Derivative \(f'(x)\) | Second Derivative \(f''(x)\) |
|----------|-----------------------------|-------------------------------|
| \(g_1(x)\) | \(g_1'(x)= (x-2)(x+1)\) | \(g_1''(x)=2x-3\) |
| \(g_2(x)\) | \(g_2'(x)= x(x+5)\) | \(g_2''(x)=2x+5\) |
| \(g_3(x)\) | \(g_3'(x)= (x-4)(x-1)(x+2)\) | \(g_3''(x)=3x^2-6\) |

---

<details>
<summary><strong>Solution Key Section B (click to expand)</strong></summary>

<br>

**✔ Function \(g_1(x)\)**  
\[
g_1'(x)= (x-2)(x+1),\qquad g_1''(x)=2x-3
\]

**Critical points:**  
\[
x=-1,\quad x=2
\]

First derivative sign chart:

- \(x<-1\): inc  
- \(-1<x<2\): dec  
- \(x>2\): inc

→ **Local max at \(-1\)**  
→ **Local min at \(2\)**  

Second derivative:

\[
g_1''(x)=0 \Rightarrow x=\frac{3}{2}=1.5
\]

Concavity:

- \(x<1.5\): \(g_1''<0\) → concave **down**  
- \(x>1.5\): concave **up**

Sketch structure:

- Peak at \(-1\)  
- Valley at \(2\)  
- Concave down until \(1.5\), concave up afterward  

---

**✔ Function \(g_2(x)\)**  
\[
g_2'(x)= x(x+5),\qquad g_2''(x)=2x+5
\]

Critical points:  
\[
x=0,\quad x=-5
\]

Sign chart:

- \(x<-5\): inc  
- \(-5<x<0\): dec  
- \(x>0\): inc  

→ Local max at \(x=-5\)  
→ Local min at \(x=0\)

Second derivative:

\[
g_2''(x)=0 \Rightarrow x=-\frac52=-2.5
\]

Concavity:

- \(x<-2.5\): concave down  
- \(x>-2.5\): concave up  

Sketch:

A classic peak → valley → rising curve.

---

**✔ Function \(g_3(x)\)**  
\[
g_3'(x)= (x-4)(x-1)(x+2),\qquad g_3''(x)=3x^2-6
\]

Critical points:  
\[
x=-2,\quad x=1,\quad x=4
\]

Sign chart:

- \(x<-2\): decreasing  
- \(-2<x<1\): increasing  
- \(1<x<4\): decreasing  
- \(x>4\): increasing  

→ Local **min** at \(-2\)  
→ Local **max** at \(1\)  
→ Local **min** at \(4\)

Second derivative:

\[
g_3''(x)=0 \Rightarrow 3x^2-6=0 \Rightarrow x=\pm \sqrt{2}
\]

Concavity:

- \(x<-\sqrt2\): up  
- \(-\sqrt2<x<\sqrt2\): down  
- \(x>\sqrt2\): up  

Sketch:

Two valleys, one peak, with inflection points at \(\pm \sqrt{2}\).

---

</details>



#### **Section C — Asymptotes, Extrema, and Concavity** {-}

For each function:

- Identify **vertical asymptotes**  
- Identify **horizontal asymptotes** using limits  
- Use the provided first derivative to make a **first-derivative sign chart**  
- Use the second derivative to determine concavity  
- Describe end behavior  
- Sketch the qualitative shape  

**Table C1 — Functions & First Derivatives**

| Function | First Derivative \(h'(x)\) |
|:--------:|:---------------------------:|
| \(h_1(x)=\dfrac{2e^{-x}}{x-3}+1\) | \(h_1'(x)=\dfrac{-2e^{-x}(x-3)-2e^{-x}}{(x-3)^2}\) |
| \(h_2(x)=\dfrac{5}{x^{2}-4}+2\) | \(h_2'(x)=\dfrac{-10x}{(x^{2}-4)^{2}}\) |
| \(h_3(x)=\dfrac{e^{x}}{x+1}-4\) | \(h_3'(x)=\dfrac{e^{x}(x+1)-e^{x}}{(x+1)^2}=\dfrac{e^{x}x}{(x+1)^2}\) |

---

**Table C2 — Second Derivatives & Asymptotes**

| Second Derivative \(h''(x)\) | Asymptotes |
|:----------------------------:|:-----------:|
| \(h_1''(x)=\dfrac{2e^{-x}(x^{2}-6x+11)}{(x-3)^{3}}\) | VA: \(x=3\) HA: \(y=1\) |
| \(h_2''(x)=\dfrac{30x^{2}+40}{(x^{2}-4)^{3}}\) | VA: \(x=\pm 2\) HA: \(y=2\) |
| \(h_3''(x)=\dfrac{e^{x}(x^{2}+x-1)}{(x+1)^{3}}\) | VA: \(x=-1\) HA: \(y=-4\) |


---




<details>
<summary><strong>Solution Key Section C (click to expand)</strong></summary>

<br>


We use both C1 and C2 tables.

---

**✔ Function \(h_1(x)=\dfrac{2e^{-x}}{x-3}+1\)**

**Vertical asymptote:**  
\[
x=3
\]

**Horizontal asymptote:**  
\[
\lim_{x\to\infty} 1 = 1,\qquad 
\lim_{x\to -\infty} 1 = 1
\]
→ **HA: \(y=1\)**

**First derivative sign:**

\[
h_1'(x)=\frac{-2e^{-x}(x-3)-2e^{-x}}{(x-3)^2}
\]

Since denominator >0, sign depends on numerator:

\[
-2e^{-x}(x-3)-2e^{-x}
= -2e^{-x}(x-2)
\]

→ critical point at \(x=2\)

Sign chart:

- \(x<2\): \(h_1'<0\) → decreasing  
- \(x>2\): \(h_1'>0\) → increasing  

→ **Local minimum at \(x=2\)**

Second derivative:

Denominator sign gives:

- Concave **down** on \((3,\infty)\)  
- Concave **up** on \((-\infty,3)\)  

---

**✔ Function \(h_2(x)=\dfrac{5}{x^{2}-4}+2\)**

**Vertical asymptotes:**  
\[
x=-2,\quad x=2
\]

**Horizontal asymptote:**  
\[
\lim_{x\to\pm\infty}2 = 2
\]

**First derivative:**

\[
h_2'(x)=\frac{-10x}{(x^{2}-4)^2}
\]

Critical point at \(x=0\).

Sign chart:

- \(x<0\): \(h_2'(x)>0\) → increasing  
- \(x>0\): decreasing  

→ **Local max at \(x=0\)**

Second derivative:

\[
h_2''(x)=\frac{30x^2+40}{(x^2-4)^3}
\]

Concavity:

- \(x<-2\): concave **up**  
- \(-2<x<2\): concave **down**  
- \(x>2\): concave **up**  

---

**✔ Function \(h_3(x)=\dfrac{e^{x}}{x+1}-4\)**

**Vertical asymptote:**  
\[
x=-1
\]

**Horizontal asymptote:**  
As \(x\to -\infty\), the exponential dominates:

\[
\lim_{x\to -\infty} \frac{e^x}{x+1} -4 = -4
\]

As \(x\to +\infty\):

\[
\frac{e^x}{x+1} \to +\infty
\]

→ **No horizontal asymptote as \(x→+∞\)**  
→ **HA: \(y=-4\)** on the left only

**First derivative:**

\[
h_3'(x)=\frac{e^x x}{(x+1)^2}
\]

Critical point at \(x=0\).

Sign chart:

- \(x<0\): negative → decreasing  
- \(x>0\): positive → increasing  

→ **Local minimum at \(x=0\)**

Second derivative:

\[
h_3''(x)=\frac{e^x(x^2+x-1)}{(x+1)^3}
\]

Roots of numerator:

\[
x=\frac{-1\pm \sqrt{5}}{2} \approx -1.618,\; 0.618
\]

Concavity:

- Concavity flips at both points (where defined).  
- Undefined at \(x=-1\).

---

</details>



